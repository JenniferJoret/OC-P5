const queryString=window.location.search,urlParams=new URLSearchParams(queryString),product=urlParams.get("id");var APITeddies="http://localhost:3000/api/teddies/"+product;products(APITeddies).then(e=>{const t=document.getElementById("inputState"),n=document.getElementById("product-title"),a=document.getElementById("product-picture"),c=document.getElementById("product-description"),o=document.getElementById("price"),r=document.getElementById("quantity"),d=document.getElementById("add-to-cart");n.innerText=e.name,a.src=e.imageUrl,c.innerText=e.description,o.innerText=e.price/100+" €",r.addEventListener("change",function(){o.innerText=e.price*r.value/100+" €"}),e.colors.forEach(e=>{let n=document.createElement("option");n.innerText=e,t.appendChild(n)}),d.addEventListener("click",function(){let n=t.value,a={id:e._id,name:e.name,quantity:parseInt(r.value),price:e.price*r.value/100,color:n,url:e.imageUrl};if(localStorage.cartItems){const e=JSON.parse(localStorage.cartItems);let t=0,n=!1;for(;t<e.length;){if(e[t].id==a.id&&e[t].color==a.color){e[t].quantity=e[t].quantity+a.quantity,e[t].price=e[t].price+a.price,n=!0;break}t++}0==n&&e.push(a),localStorage.setItem("cartItems",JSON.stringify(e))}else localStorage.setItem("cartItems",JSON.stringify([a]));getCartDetail(),getNavCount();const c=document.getElementById("alert-success");c.textContent=a.name+" a bien été ajouté au panier !",c.classList.remove("d-none"),c.classList.add("d-block"),setTimeout(function(){c.classList.remove("d-block"),c.classList.add("d-none")},3e3)})}).catch(e=>{document.getElementById("main").innerHTML='<div class="text-center m-auto bg-white p-5 rounded"><h2 class="h1">Oups ! Le produit recherché n\'existe pas !</h2><br/><p class="h4">Vous allez être redirigé vers la page d\'accueil dans <span id="countdown">5</span> seconde<span id="plural">s</span>...</p></div>';var t=document.getElementById("countdown").textContent,n=setInterval(function(){t--,document.getElementById("countdown").textContent=t,document.getElementById("plural").textContent=1==t?"":"s",document.getElementById("countdown").textContent=t,t<=1&&clearInterval(n)},1e3);setTimeout(function(){window.location.href="index.html"},5e3)});