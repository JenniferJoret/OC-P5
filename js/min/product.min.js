const queryString=window.location.search,urlParams=new URLSearchParams(queryString),product=urlParams.get("id");var APITeddies="/api/teddies/"+product;products(APITeddies).then(e=>{const t=document.getElementById("inputState"),n=document.getElementById("product-title"),c=document.getElementById("product-picture"),a=document.getElementById("product-description"),o=document.getElementById("price"),r=document.getElementById("quantity"),i=document.getElementById("add-to-cart");n.innerText=e.name,c.innerHTML='<img class="col-12 p-0" id="product-picture" src="'+e.imageUrl+'" alt="Photo de '+e.name+'"/>',c.src=e.imageUrl,a.innerText=e.description,o.innerText=e.price/100+" €",r.addEventListener("change",(function(){o.innerText=e.price*r.value/100+" €"})),e.colors.forEach(e=>{let n=document.createElement("option");n.innerText=e,t.appendChild(n)}),i.addEventListener("click",(function(){let n=t.value,c={id:e._id,name:e.name,quantity:parseInt(r.value),price:e.price*r.value/100,color:n,url:e.imageUrl};if(localStorage.cartItems){const e=JSON.parse(localStorage.cartItems);let t=0,n=!1;for(;t<e.length;){if(e[t].id==c.id&&e[t].color==c.color){e[t].quantity=e[t].quantity+c.quantity,e[t].price=e[t].price+c.price,n=!0;break}t++}0==n&&e.push(c),localStorage.setItem("cartItems",JSON.stringify(e))}else localStorage.setItem("cartItems",JSON.stringify([c]));getCartDetail(),getNavCount();const a=document.getElementById("alert-success");a.textContent=c.name+" a bien été ajouté au panier !",a.classList.remove("d-none"),a.classList.add("d-block"),setTimeout((function(){a.classList.remove("d-block"),a.classList.add("d-none")}),3e3)}))}).catch(e=>{document.getElementById("main").innerHTML='<div class="text-center m-auto bg-white p-5 rounded"><h2 class="h1">Oups ! Le produit recherché n\'existe pas !</h2><br/><p class="h4">Vous allez être redirigé vers la page d\'accueil dans <span id="countdown">5</span> seconde<span id="plural">s</span>...</p></div>';var t=document.getElementById("countdown").textContent,n=setInterval((function(){t--,document.getElementById("countdown").textContent=t,document.getElementById("plural").textContent=1==t?"":"s",document.getElementById("countdown").textContent=t,t<=1&&clearInterval(n)}),1e3);setTimeout((function(){window.location.href="index.html"}),5e3)});